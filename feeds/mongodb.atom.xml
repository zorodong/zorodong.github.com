<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>zorodong's Blog</title><link href="%3Chttp://zorodong.github.io%3E/" rel="alternate"></link><link href="%3Chttp://zorodong.github.io%3E/feeds/mongodb.atom.xml" rel="self"></link><id>&lt;http://zorodong.github.io&gt;/</id><updated>2015-07-02T00:00:00+08:00</updated><entry><title>mongodb对新表做预分片处理</title><link href="%3Chttp://zorodong.github.io%3E/mongodbdui-xin-biao-zuo-yu-fen-pian-chu-li.html" rel="alternate"></link><updated>2015-07-02T00:00:00+08:00</updated><author><name>zorodong</name></author><id>tag:,2015-07-02:&lt;http://zorodong.github.io&gt;/mongodbdui-xin-biao-zuo-yu-fen-pian-chu-li.html</id><summary type="html">&lt;h3&gt;这里对mongodb的解决方案是关闭autobalance，对表进行pre_split 和 pre_move，分一下几个步骤：&lt;/h3&gt;
&lt;h4&gt;1. 创建一个新的collection，检查目标db是否sharding开启，没有的话开启在admin下 对db_name 设置enablesharding，这个操作并不会真正对collection做sharding&lt;/h4&gt;
&lt;h4&gt;2. 在admin下对目标collection做开启sharding，用制定的key来做shard&lt;/h4&gt;
&lt;h4&gt;3. 在admin下对目标collection做pre_split，对数据做预先划分&lt;/h4&gt;
&lt;h4&gt;4. 将split之后的chunk迁移到其他shard上 movechunk&lt;/h4&gt;</summary><category term="mongodb"></category></entry></feed>